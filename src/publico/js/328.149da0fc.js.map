{"version":3,"file":"js/328.149da0fc.js","mappings":"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","sources":["webpack://tienda-martin-front/./src/views/ProductosVendidos.vue","webpack://tienda-martin-front/./src/components/Producto/ProductoVendidosTablaComponete.vue","webpack://tienda-martin-front/src/components/Producto/ProductoVendidosTablaComponete.vue","webpack://tienda-martin-front/./src/components/Producto/ProductoVendidosTablaComponete.vue?3d04","webpack://tienda-martin-front/./src/components/Producto/ProductoVendidosTablaComponete.vue?d7ea","webpack://tienda-martin-front/src/views/ProductosVendidos.vue","webpack://tienda-martin-front/./src/views/ProductosVendidos.vue?e316","webpack://tienda-martin-front/./src/views/ProductosVendidos.vue?ae27"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[_c('h5',[_vm._v(\"Productos:\")]),_c('div',{staticClass:\"form-group\"},[_c('label',{attrs:{\"for\":\"select\"}},[_vm._v(\"Seleccione el filtro:\")]),(_vm.filtros.length > 0)?_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.filtro),expression:\"filtro\"}],staticClass:\"form-select form-control\",attrs:{\"id\":\"select\",\"aria-label\":\"Default select example\"},on:{\"change\":[function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.filtro=$event.target.multiple ? $$selectedVal : $$selectedVal[0]},function($event){return _vm.verProductos()}]}},_vm._l((_vm.filtros),function(filtro){return _c('option',{key:filtro.codigo,domProps:{\"value\":filtro.codigo}},[_vm._v(\" \"+_vm._s(filtro.descripcion)+\" \")])}),0):_vm._e()]),_c('ProductoTablaComponente',{attrs:{\"productos\":_vm.productos}})],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"mt-5\"},[_c('table',{staticClass:\"table\"},[_vm._m(0),_c('tbody',_vm._l((_vm.productos),function(producto){return _c('tr',{key:producto.codigo},[_c('td',[_vm._v(_vm._s(producto.codigo))]),_c('td',[_vm._v(_vm._s(producto.descripcion))]),_c('td',[_vm._v(_vm._s(producto.valor))]),_c('td',[_vm._v(_vm._s(producto.cantidad))])])}),0)])])\n}\nvar staticRenderFns = [function (){var _vm=this,_c=_vm._self._c;return _c('thead',{staticClass:\"thead-light\"},[_c('tr',[_c('th',{attrs:{\"scope\":\"col\"}},[_vm._v(\"C贸digo\")]),_c('th',{attrs:{\"scope\":\"col\"}},[_vm._v(\"Descripci贸n\")]),_c('th',{attrs:{\"scope\":\"col\"}},[_vm._v(\"Valor\")]),_c('th',{attrs:{\"scope\":\"col\"}},[_vm._v(\"Cant veces vendidas\")])])])\n}]\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"mt-5\">\r\n    <table class=\"table\">\r\n      <thead class=\"thead-light\">\r\n        <tr>\r\n          <th scope=\"col\">C贸digo</th>\r\n          <th scope=\"col\">Descripci贸n</th>\r\n          <th scope=\"col\">Valor</th>\r\n          <th scope=\"col\">Cant veces vendidas</th>\r\n        </tr>\r\n      </thead>\r\n      <tbody>\r\n        <tr v-for=\"producto in productos\" :key=\"producto.codigo\">\r\n          <td>{{ producto.codigo }}</td>\r\n          <td>{{ producto.descripcion }}</td>\r\n          <td>{{ producto.valor }}</td>\r\n          <td>{{ producto.cantidad }}</td>\r\n        </tr>\r\n      </tbody>\r\n    </table>\r\n  </div>\r\n</template>\r\n<script>\r\nexport default {\r\n  props: {\r\n    productos: [],\r\n  },\r\n  methods: {\r\n    async seleccionarProducto(producto) {\r\n      const date = new Date();\r\n\r\n      const dia = date.getDate();\r\n      const mes = date.getMonth() + 1;\r\n      const anio = date.getFullYear();\r\n\r\n      const fecha = dia + \"-\" + mes + \"-\" + anio;\r\n      const identificacionCliente = JSON.parse(\r\n        localStorage.getItem(\"cliente\")\r\n      ).identificacion;\r\n\r\n      const compraGuardar = {\r\n        fecha,\r\n        identificacionCliente,\r\n        total: producto.valor,\r\n      };\r\n      const compraPendiente = await this.compraPendiente(identificacionCliente);\r\n\r\n      if (compraPendiente == null) {\r\n        const clienteTieneCupoDisponibleNuevaCompra =\r\n          await this.validarCupoClienteNuevaCompra(\r\n            identificacionCliente,\r\n            producto.valor\r\n          );\r\n\r\n        if (clienteTieneCupoDisponibleNuevaCompra) {\r\n          const respuesta = await this.axios.post(\"compra\", compraGuardar);\r\n          if (respuesta) {\r\n            const numeroCompra = respuesta.data.numero;\r\n            if (numeroCompra !== null) {\r\n              const detalleCompraGuardar = {\r\n                numeroCompra,\r\n                codigoProducto: producto.codigo,\r\n                valor: producto.valor,\r\n              };\r\n              const respuestaDetalle = await this.axios.post(\r\n                \"detalle_compra\",\r\n                detalleCompraGuardar\r\n              );\r\n              if (respuestaDetalle) {\r\n                alert(respuestaDetalle.data.mensaje);\r\n              }\r\n            }\r\n          }\r\n        } else {\r\n          alert(\"El cliente seleccionado no tiene cupo suficiente\");\r\n        }\r\n      } else {\r\n        const productoYaEstaEnCarritoCliente =\r\n          await this.productoYaEstaEnCarritoCliente(\r\n            producto.codigo,\r\n            identificacionCliente\r\n          );\r\n        if (!productoYaEstaEnCarritoCliente) {\r\n          const clienteTieneCupoDisponibleCompraPendiente =\r\n            await this.validarCupoClienteCompraPendiente(\r\n              identificacionCliente,\r\n              producto.valor\r\n            );\r\n          if (clienteTieneCupoDisponibleCompraPendiente) {\r\n            const detalleCompraGuardar = {\r\n              numeroCompra: compraPendiente.numero,\r\n              codigoProducto: producto.codigo,\r\n              valor: producto.valor,\r\n            };\r\n            const respuestaDetalle = await this.axios.post(\r\n              \"detalle_compra\",\r\n              detalleCompraGuardar\r\n            );\r\n            if (respuestaDetalle) {\r\n              alert(respuestaDetalle.data.mensaje);\r\n            }\r\n          } else {\r\n            alert(\"El cliente seleccionado no tiene cupo suficiente\");\r\n          }\r\n        } else {\r\n          alert(\"El cliente seleccionado ya tiene agregado el producto \" + producto.descripcion);\r\n        }\r\n      }\r\n    },\r\n    async validarCupoClienteCompraPendiente(identificacionCliente, total) {\r\n      const respuesta = await this.axios.get(\r\n        \"cupo_compra/\" + identificacionCliente + \"/\" + total\r\n      );\r\n      return respuesta.data;\r\n    },\r\n    async validarCupoClienteNuevaCompra(identificacionCliente, total) {\r\n      const respuesta = await this.axios.get(\r\n        \"cupo_compra/nueva_compra/\" + identificacionCliente + \"/\" + total\r\n      );\r\n      return respuesta.data;\r\n    },\r\n    async compraPendiente(identificacionCliente) {\r\n      const compra = {\r\n        identificacionCliente,\r\n        estado: \"PENDIENTE\",\r\n      };\r\n      const respuesta = await this.axios.post(\"compra/info\", compra);\r\n      return respuesta.data;\r\n    },\r\n    async productoYaEstaEnCarritoCliente(\r\n      codigoProducto,\r\n      identificacionCliente\r\n    ) {\r\n      const respuesta = await this.axios.get(\r\n        \"detalle_compra/verificar_producto_carrito/\" +\r\n          codigoProducto +\r\n          \"/\" +\r\n          identificacionCliente\r\n      );\r\n      return respuesta.data;\r\n    },\r\n  },\r\n};\r\n</script>\r\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ProductoVendidosTablaComponete.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ProductoVendidosTablaComponete.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ProductoVendidosTablaComponete.vue?vue&type=template&id=0476cda8&\"\nimport script from \"./ProductoVendidosTablaComponete.vue?vue&type=script&lang=js&\"\nexport * from \"./ProductoVendidosTablaComponete.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\r\n  <div>\r\n    <h5>Productos:</h5>\r\n    <div class=\"form-group\">\r\n      <label for=\"select\">Seleccione el filtro:</label>\r\n      <select\r\n        id=\"select\"\r\n        class=\"form-select form-control\"\r\n        aria-label=\"Default select example\"\r\n        v-if=\"filtros.length > 0\"\r\n        v-model=\"filtro\"\r\n        @change=\"verProductos()\"\r\n      >\r\n        <option\r\n          :value=\"filtro.codigo\"\r\n          v-for=\"filtro in filtros\"\r\n          :key=\"filtro.codigo\"\r\n        >\r\n          {{ filtro.descripcion }}\r\n        </option>\r\n      </select>\r\n    </div>\r\n    <ProductoTablaComponente :productos=\"productos\" />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport ProductoTablaComponente from \"@/components/Producto/ProductoVendidosTablaComponete.vue\";\r\nexport default {\r\n  name: \"inicioView\",\r\n  components: {\r\n    ProductoTablaComponente,\r\n  },\r\n  data() {\r\n    return {\r\n      productos: [],\r\n      filtros: [\r\n        { codigo: 1, descripcion: \"Cliente Seleccionado\" },\r\n        { codigo: 2, descripcion: \"Todas las Compras\" },\r\n      ],\r\n      filtro: 2,\r\n    };\r\n  },\r\n  created() {\r\n    this.verProductos();\r\n  },\r\n  methods: {\r\n    async verProductos() {\r\n      const cliente = JSON.parse(localStorage.getItem(\"cliente\"));\r\n\r\n      let identificacionCliente = \"TODOS\";\r\n\r\n      if (this.filtro == 1) {\r\n        if (cliente !== null) {\r\n          identificacionCliente = cliente.identificacion;\r\n        } else {\r\n          alert(\"Debe seleccionar un cliente\");\r\n          this.filtro = 2;\r\n        }\r\n      }\r\n      const respuesta = await this.axios.get(\r\n        \"producto/comprados/\" + identificacionCliente\r\n      );\r\n      this.productos = respuesta.data;\r\n    },\r\n  },\r\n};\r\n</script>\r\n","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ProductosVendidos.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ProductosVendidos.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ProductosVendidos.vue?vue&type=template&id=7764d44b&\"\nimport script from \"./ProductosVendidos.vue?vue&type=script&lang=js&\"\nexport * from \"./ProductosVendidos.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","_v","staticClass","attrs","filtros","length","directives","name","rawName","value","filtro","expression","on","$event","$$selectedVal","Array","prototype","filter","call","target","options","o","selected","map","val","_value","multiple","verProductos","_l","key","codigo","domProps","_s","descripcion","_e","productos","staticRenderFns","_m","producto","valor","cantidad","props","methods","localStorage","fecha","identificacionCliente","total","numeroCompra","codigoProducto","detalleCompraGuardar","alert","estado","component","components","ProductoTablaComponente","data","created"],"sourceRoot":""}